- name: Add sync proxy releases command to cron
  cron:
    name="Sync proxy releases with packagist.org"
    user="{{ system_user }}"
    minute="*/5"
    job="{{ app_current_dir }}/bin/console repman:proxy:sync-releases >>{{ app_current_dir }}/var/log/cron.log 2>&1"

- name: Add sync proxy metadata command to cron
  cron:
    name="Sync proxy metadata with origins"
    user="{{ system_user }}"
    minute="*/6"
    job="{{ app_current_dir }}/bin/console repman:proxy:sync-metadata >>{{ app_current_dir }}/var/log/cron.log 2>&1"

- name: Add security update-db command to cron
  cron:
    name="Update security advisories database"
    user="{{ system_user }}"
    minute=0
    hour="*/2"
    job="{{ app_current_dir }}/bin/console repman:security:update-db >>{{ app_current_dir }}/var/log/cron.log 2>&1"

- name: Add telemetry send command to cron
  cron:
    name="Send telemetry data"
    user="{{ system_user }}"
    minute=0
    hour=0
    job="{{ app_current_dir }}/bin/console repman:telemetry:send >>{{ app_current_dir }}/var/log/cron.log 2>&1"

- name: Clear old private dev distributions files
  cron:
    name="Clear old dists"
    user="{{ system_user }}"
    minute=0
    hour=1
    job="{{ app_current_dir }}/bin/console repman:package:clear-old-dists >>{{ app_current_dir }}/var/log/cron.log 2>&1"
